(function(t){function e(e){for(var i,c,s=e[0],a=e[1],u=e[2],l=0,b=[];l<s.length;l++)c=s[l],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);d&&d(e);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},o=[];function c(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"dfd97c21"}[t]+".js"}function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=i);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=c(t);var u=new Error;o=function(e){a.onerror=a.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,n[1](u)}r[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(e)},s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"2dd1":function(t,e,n){},4236:function(t,e,n){},"4afb":function(t,e,n){"use strict";n("2dd1")},5371:function(t,e,n){"use strict";n("4236")},"62b7":function(t,e,n){},9320:function(t,e,n){"use strict";n("62b7")},9360:function(t,e,n){"use strict";n("c8d8")},"9ae0":function(t,e,n){},a795:function(t,e,n){"use strict";n("f560")},c8d8:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var i=n("7a23");const r=Object(i["j"])("a",{class:"github-fork-ribbon right-top",href:"https://github.com/ydarma/hey","data-ribbon":"Contribuer sur GitHub",title:"Contribuer sur GitHub"}," Contribute on GitHub ",-1),o={class:"d-flex"},c={class:"w-50"},s=Object(i["k"])(" A propos "),a={class:"main"};function u(t,e,n,u,l,d){const b=Object(i["H"])("b-icon"),h=Object(i["H"])("b-button"),f=Object(i["H"])("table-of-content"),O=Object(i["H"])("b-button-group"),p=Object(i["H"])("b-card"),j=Object(i["H"])("router-view");return Object(i["B"])(),Object(i["i"])(i["b"],null,[r,Object(i["l"])(p,{class:"fixed-top menu"},{default:Object(i["O"])(()=>[Object(i["j"])("div",o,[Object(i["j"])("div",c,[Object(i["l"])(h,{class:"mx-1 d-none d-lg-inline",variant:"success",to:"/"},{default:Object(i["O"])(()=>[Object(i["l"])(b,{icon:"house"})]),_:1}),Object(i["l"])(f,{class:"mx-1"}),Object(i["l"])(h,{class:"mx-1 d-none d-lg-inline",variant:"info",to:"/about"},{default:Object(i["O"])(()=>[s]),_:1})]),Object(i["j"])("div",null,[Object(i["l"])(O,null,{default:Object(i["O"])(()=>[Object(i["l"])(h,{variant:"success",class:"left-pill",onClick:e[0]||(e[0]=e=>t.disposition="editor")},{default:Object(i["O"])(()=>[Object(i["l"])(b,{size:"lg",icon:"box-arrow-left"})]),_:1}),Object(i["l"])(h,{variant:"success",onClick:e[1]||(e[1]=e=>t.disposition="both")},{default:Object(i["O"])(()=>[Object(i["l"])(b,{size:"lg",icon:"vr"})]),_:1}),Object(i["l"])(h,{variant:"success",class:"right-pill",onClick:e[2]||(e[2]=e=>t.disposition="book")},{default:Object(i["O"])(()=>[Object(i["l"])(b,{size:"lg",icon:"box-arrow-right"})]),_:1})]),_:1})])])]),_:1}),Object(i["j"])("div",a,[Object(i["l"])(j,{disposition:t.disposition},null,8,["disposition"])])],64)}n("ab0d");function l(t,e,n,r,o,c){const s=Object(i["H"])("b-icon"),a=Object(i["H"])("b-button"),u=Object(i["H"])("b-dropdown-item-button"),l=Object(i["H"])("b-dropdown-divider"),d=Object(i["H"])("b-dropdown"),b=Object(i["H"])("b-button-group");return Object(i["B"])(),Object(i["g"])(b,{class:"mx-2"},{default:Object(i["O"])(()=>[Object(i["l"])(a,{variant:"secondary",disabled:!1===this.previous,onClick:e[0]||(e[0]=e=>t.open(t.previous))},{default:Object(i["O"])(()=>[Object(i["l"])(s,{icon:"arrow-left"})]),_:1},8,["disabled"]),Object(i["l"])(d,{id:"dropdown-1",text:"Table des matières"},{default:Object(i["O"])(()=>[(Object(i["B"])(!0),Object(i["i"])(i["b"],null,Object(i["F"])(t.chapters,([e,n])=>(Object(i["B"])(),Object(i["g"])(u,{key:n,onClick:e=>t.open(n)},{default:Object(i["O"])(()=>[Object(i["k"])(Object(i["L"])(e),1)]),_:2},1032,["onClick"]))),128)),Object(i["l"])(l),(Object(i["B"])(!0),Object(i["i"])(i["b"],null,Object(i["F"])(t.appendices,([e,n])=>(Object(i["B"])(),Object(i["g"])(u,{key:"ap"+n,onClick:e=>t.open(n)},{default:Object(i["O"])(()=>[Object(i["k"])(Object(i["L"])(e),1)]),_:2},1032,["onClick"]))),128))]),_:1}),Object(i["l"])(a,{variant:"secondary",disabled:!1===this.next,onClick:e[1]||(e[1]=e=>t.open(t.next))},{default:Object(i["O"])(()=>[Object(i["l"])(s,{icon:"arrow-right"})]),_:1},8,["disabled"])]),_:1})}var d=n("5502"),b=n("dfd0"),h=n("1020"),f=n.n(h),O=n("7c5c");const p=[{className:"comment",regex:";.*$"},{className:"string",regex:/".*[^"]("")*"/},{className:"number",regex:/[+-]?\d+/},{className:"def",regex:/\bdef\b/},{className:"constant",regex:/\b(green|blue|yellow|red|purple|grey|black|white|orange)\b(?![-0-9])/},{className:"operator",regex:/[():]|->/},{className:"keyword",regex:/\b(range|square|concat|c|repeat|r|slice|s)\b(?![-0-9])/}];var j=function(){return{name:"hey",contains:p.map(t=>({className:t.className,begin:t.regex}))}};function m(t){f.a.registerLanguage("hey",j);const e=O["marked"].setOptions({highlight:(t,e)=>f.a.highlight(t,{language:e}).value})(t);return e}var g=n("e409"),v=n.n(g);function y(t){v()(".language-hey").parent().each((e,n)=>{v()(n).addClass("mx-5 my-3"),v()(n).append(v()("<button/>").text("Essayer").addClass("btn btn-outline-primary btn-sm m-1").on({click:()=>{t(v()(n).find("code").prop("innerText").trim())}}))})}function w(){const t=v()(".language-hey").filter((t,e)=>{var n,i;return/^;.*solution$/.test(null!==(i=null===(n=e.firstChild)||void 0===n?void 0:n.textContent)&&void 0!==i?i:"")});t.each((t,e)=>{const n=v()(e).parent().children();let i=!0;const r=v()("<button/>").text("Montrer la solution").addClass("btn btn-outline-warning btn-sm m-1").on({click:()=>{i?(v()(n).show(),r.text("Masquer la solution")):(v()(n).hide(),r.text("Montrer la solution")),i=!i}});v()(n).parent().append(r),v()(n).hide()})}function k(t){return Object(b["a"])(`/book/${t}.md`).text().then(t=>m(t))}const x="0 - Couverture.md\n1 - Introduction.md\n2 - Ada Lovelace.md\n3 - Données.md\n4 - Listes.md\n5 - Définitions.md\n6 - Fonctions.md\nA - hey! documentation.md".split("\n").map((t,e)=>[t.replace(/.md$/,""),e]);var H={toc:x,open:k,initInteractions:t=>{y(t),w()}},z=Object(i["m"])({props:[],data:function(){return{current:0}},computed:{chapters(){return H.toc.filter(([t])=>/^\d/.test(t))},appendices(){return H.toc.filter(([t])=>/^[A-Z]/.test(t))},previous(){return this.current>0&&this.current-1},next(){return this.current<H.toc.length-1&&this.current+1},title(){return this.$route.query.title}},methods:Object.assign(Object.assign({},Object(d["c"])(["setChapter"])),{open(t){this.current=t,this.$router.push({path:"/",query:{title:H.toc[t][0]}})}}),watch:{title(t){this.current=H.toc.findIndex(([e])=>e==t)}}}),S=n("6b0d"),E=n.n(S);const _=E()(z,[["render",l]]);var C=_,L=Object(i["m"])({data(){return{disposition:"both"}},components:{TableOfContent:C}});n("5371");const A=E()(L,[["render",u]]);var P=A,$=n("6c02");const B={class:"home m-3 d-flex flex-row h-100"},M={class:"d-flex flex-column h-100 exec-pane"};function T(t,e,n,r,o,c){const s=Object(i["H"])("book-viewer"),a=Object(i["H"])("HeyEditor"),u=Object(i["H"])("b-icon"),l=Object(i["H"])("b-button"),d=Object(i["H"])("b-button-group"),b=Object(i["H"])("HeyOut");return Object(i["B"])(),Object(i["i"])("div",B,[Object(i["j"])("div",{class:Object(i["t"])(["p-2",{"w-50":"both"==t.disposition,"w-100":"book"==t.disposition,invisible:"editor"==t.disposition}])},[Object(i["l"])(s)],2),Object(i["j"])("div",{class:Object(i["t"])(["p-2",{"w-50":"both"==t.disposition,"w-100":"editor"==t.disposition,invisible:"book"==t.disposition}])},[Object(i["j"])("div",M,[Object(i["j"])("div",{class:Object(i["t"])(["mb-2 border rounded p-1 editor",{minimize:t.minimizeEditor,balance:!t.minimizeEditor&&!t.minimizeOut,maximize:!t.minimizeEditor}]),ref:"editor"},[Object(i["l"])(a)],2),Object(i["j"])("div",null,[Object(i["l"])(l,{variant:"danger",class:"mx-3",pill:"",onClick:e[0]||(e[0]=e=>t.execute())},{default:Object(i["O"])(()=>[Object(i["l"])(u,{size:"lg",icon:"play"})]),_:1}),Object(i["l"])(l,{variant:"secondary",class:"mx-3",pill:"",onClick:e[1]||(e[1]=e=>t.clear())},{default:Object(i["O"])(()=>[Object(i["l"])(u,{size:"lg",icon:"x"})]),_:1}),Object(i["l"])(d,{class:"mx-3"},{default:Object(i["O"])(()=>[Object(i["l"])(l,{variant:"info",class:"left-pill",onClick:e[2]||(e[2]=e=>t.maximizeEditor())},{default:Object(i["O"])(()=>[Object(i["l"])(u,{size:"lg",icon:"box-arrow-down"})]),_:1}),Object(i["l"])(l,{variant:"info",onClick:e[3]||(e[3]=e=>t.balance())},{default:Object(i["O"])(()=>[Object(i["l"])(u,{size:"lg",icon:"hr"})]),_:1}),Object(i["l"])(l,{variant:"info",class:"right-pill",onClick:e[4]||(e[4]=e=>t.maximizeOut())},{default:Object(i["O"])(()=>[Object(i["l"])(u,{size:"lg",icon:"box-arrow-up"})]),_:1})]),_:1})]),Object(i["j"])("div",{class:Object(i["t"])(["p-2 result",{minimize:t.minimizeOut,balance:!t.minimizeEditor&&!t.minimizeOut,maximize:!t.minimizeOut}])},[Object(i["l"])(b)],2)])],2)])}const q={class:"h-100",ref:"container"},V=Object(i["j"])("div",{id:"editor"},null,-1),N=[V];function F(t,e,n,r,o,c){return Object(i["B"])(),Object(i["i"])("div",q,N,512)}var I=n("9ab4"),R=n("6d4f"),D=n.n(R);n("65d8");const G=D.a.require("ace/lib/oop"),J=D.a.require("ace/mode/text").Mode,K=D.a.require("ace/mode/text_highlight_rules").TextHighlightRules,Z=function(){this.$rules={start:p.map(t=>({token:t.className,regex:t.regex}))}};G.inherits(Z,K);const Q=function(){this.HighlightRules=Z};G.inherits(Q,J);class U{constructor(t){this.marker=0,this.editor=D.a.edit(t,{minLines:5,maxLines:20,fontSize:16,highlightActiveLine:!1,placeholder:"editeur de code hey!",printMargin:!1,autoScrollEditorIntoView:!0}),this.editor.setAutoScrollEditorIntoView(!0),this.editor.session.setMode(new Q)}setProgram(t){this.resetError();const e=this.editor.session.getValue();e!=t&&this.editor.session.setValue(null!==t&&void 0!==t?t:"")}onProgramChange(t){this.editor.on("change",()=>t(this.editor.session.getValue()))}setError(t){if(this.resetError(),t){const e=new D.a.Range(t.line-1,t.col-1,t.line-1,t.col+2);this.marker=this.editor.session.addMarker(e,"alert alert-danger err py-2","text")}}resetError(){this.editor.session.removeMarker(this.marker),this.marker=0}fit(t){const e=new ResizeObserver(()=>{this.resize(t.clientHeight)});e.observe(t)}resize(t){const e=this.editor.renderer.lineHeight;this.editor.setOptions({minLines:Math.trunc(t/e),maxLines:Math.trunc(t/e)})}}var W=function(t="editor"){let e;const n=new Promise(t=>e=t);return Object(i["z"])(()=>{const n=new U(t);e(n)}),{edit:t=>n.then(e=>{e.setProgram(t)}),onChange:t=>n.then(e=>{e.onProgramChange(t)}),setError:t=>n.then(e=>{e.setError(t)}),fit:t=>n.then(e=>{e.fit(t)})}},X=(n("9ae0"),Object(i["m"])({name:"HeyEditor",props:[],data(){return{marker:0,height:0}},computed:Object.assign({},Object(d["d"])(["error","program"])),methods:Object.assign({},Object(d["c"])(["setProgram"])),setup(){return W()},updated(){this.height=this.$refs.editor.clientHeight,console.log(this.height)},beforeCreate(){this.$nextTick(()=>{this.fit(this.$refs.container),this.edit(this.program),this.onChange(t=>this.setProgram(t))})},watch:{error(t){return Object(I["a"])(this,void 0,void 0,(function*(){this.setError(t)}))},program(t){return Object(I["a"])(this,void 0,void 0,(function*(){this.edit(t)}))}}}));const Y=E()(X,[["render",F]]);var tt=Y;function et(t,e,n,r,o,c){const s=Object(i["H"])("b-alert"),a=Object(i["H"])("hey-list"),u=Object(i["H"])("hey-value");return Object(i["B"])(),Object(i["g"])(i["d"],{name:t.isError?"err-bounce":"out-bounce"},{default:Object(i["O"])(()=>[t.isError?(Object(i["B"])(),Object(i["g"])(s,{key:0,variant:"danger",class:"error",show:""},{default:Object(i["O"])(()=>[Object(i["k"])(" ["+Object(i["L"])(t.error.line)+":"+Object(i["L"])(t.error.col)+"] "+Object(i["L"])(t.error.message),1)]),_:1})):t.isArray?(Object(i["B"])(),Object(i["g"])(a,{key:1,output:t.output},null,8,["output"])):t.isValue?(Object(i["B"])(),Object(i["g"])(u,{key:2,output:t.output},null,8,["output"])):Object(i["h"])("",!0)]),_:1},8,["name"])}const nt={class:"d-flex flex-row flex-wrap"},it=Object(i["j"])("div",{class:"paren m-1"},"(",-1),rt=Object(i["j"])("div",{class:"paren m-1"},")",-1);function ot(t,e,n,r,o,c){const s=Object(i["H"])("hey-value");return Object(i["B"])(),Object(i["i"])("div",nt,[it,(Object(i["B"])(!0),Object(i["i"])(i["b"],null,Object(i["F"])(t.output,(t,e)=>(Object(i["B"])(),Object(i["i"])("div",{key:e,class:Object(i["t"])(["m-1",{"text-secondary":e%2==0,"text-dark":e%2==1}])},[Object(i["l"])(s,{output:t},null,8,["output"])],2))),128)),rt])}const ct=["innerHTML"];function st(t,e,n,r,o,c){return Object(i["B"])(),Object(i["i"])("div",null,[t.isValue?(Object(i["B"])(),Object(i["i"])("div",{key:0,class:Object(i["t"])({fun:t.isFunction})},Object(i["L"])(t.output),3)):Object(i["h"])("",!0),t.isShape?(Object(i["B"])(),Object(i["i"])("div",{key:1,innerHTML:t.output},null,8,ct)):Object(i["h"])("",!0)])}class at{constructor(t,e){this.name=t,this.props=e}toString(){return at.renderer[this.name](this.props)}}at.renderer={square:t=>{var e,n;return null!==(n=null===(e=v()("<svg/>").width(t.size).height(t.size).append(v()("<rect/>").attr("width",String(t.size)).attr("height",String(t.size)).attr("fill",String(t.color)))[0])||void 0===e?void 0:e.outerHTML)&&void 0!==n?n:""}};var ut=Object(i["m"])({props:["output"],computed:{isValue(){return!this.isShape&&"object"!=typeof this.output},isFunction(){return this.isValue&&"function"==typeof this.output},isShape(){return this.output instanceof at}}});n("9320");const lt=E()(ut,[["render",st]]);var dt=lt,bt=Object(i["m"])({components:{HeyValue:dt},props:{output:Array}});const ht=E()(bt,[["render",ot]]);var ft=ht,Ot=Object(i["m"])({components:{HeyValue:dt,HeyList:ft},props:[],computed:Object.assign(Object.assign({},Object(d["d"])(["output","error"])),{isArray(){return!this.isError&&Array.isArray(this.output)},isValue(){return!this.isError&&!!this.output},isError(){return!!this.error}})});n("4afb");const pt=E()(Ot,[["render",et]]);var jt=pt;const mt=["innerHTML"];function gt(t,e,n,r,o,c){return Object(i["B"])(),Object(i["i"])("div",{innerHTML:t.content},null,8,mt)}var vt=Object(i["m"])({data:function(){return{content:void 0}},computed:{title(){const t=this.$route.query.title;return t||H.toc[0][0]}},methods:{...Object(d["c"])(["setProgram"]),async open(){this.content=await H.open(this.title),this.$nextTick(()=>{H.initInteractions(t=>this.setProgram(t))})}},watch:{async"$route.query.title"(){await this.open()}},async mounted(){await this.open()}});n("9360");const yt=E()(vt,[["render",gt]]);var wt=yt,kt=Object(i["m"])({name:"Home",props:["disposition"],data(){return{minimizeEditor:!1,minimizeOut:!1,editorHeight:0}},methods:Object.assign(Object.assign({},Object(d["b"])(["exec","clear"])),{maximizeEditor(){this.minimizeEditor=!1,this.minimizeOut=!0},balance(){this.minimizeEditor=!1,this.minimizeOut=!1},maximizeOut(){this.minimizeEditor=!0,this.minimizeOut=!1},execute(){this.exec(),this.minimizeOut=!1}}),components:{HeyEditor:tt,HeyOut:jt,BookViewer:wt}});n("a795");const xt=E()(kt,[["render",T]]);var Ht=xt;const zt=[{path:"/",name:"Home",component:Ht},{path:"/about",name:"About",component:()=>n.e("about").then(n.bind(null,"f820"))}],St=Object($["a"])({history:Object($["b"])("/"),routes:zt});var Et=St,_t=n("e32f"),Ct=n.n(_t);function Lt(t,e,n,i){const{line:r,col:o,tok:c}=s(e);return{line:r,col:o,message:`expected ${n}, got ${null!==i&&void 0!==i?i:c}`};function s(e){const n=t.substring(0,e+1),i=n.split(/\r\n|\r|\n/g),r=i.length,o=i[i.length-1].length,c=n.slice(-1);return{line:r,col:o,tok:c}}}function At(t,e,n){return Lt(t,e,"color",n)}function Pt(t,e,n){return Lt(t,e,"number",n)}function $t(t,e,n){return Lt(t,e,"function or data",n)}function Bt(t,e,n){return Lt(t,e,"data",n)}function Mt(t,e,n){return Lt(t,e,"identifier",n)}function Tt(t,e,n,i){return Lt(t,e,i+" argument(s)",n)}function qt(t,e){const n=e.getRightmostFailurePosition(),i=Object.keys(e.matcher.memoTable[n].memo),r=i[i.length-1];return Lt(t,n,r)}function Vt(t,e,n){return Lt(t,e,"new identifier",n)}function Nt(t,e){return Lt(t,e,"continuation","interruption")}const Ft=[[1,1],[-1,2]];function It(t){if(t<Ft.length)return Ft[t];const e=Dt(t),n=e.map(t=>It(t)),i=e.map(e=>Gt(e,t+1)),r=n.map((t,e)=>[t[0]*i[e],t[1]]),o=r.reduce((t,e)=>Rt([t[0]*e[1]+e[0]*t[1],t[1]*e[1]])),c=Rt([-o[0],o[1]*(t+1)]);return Ft.push(c,[0,1]),c}function Rt([t,e]){let n,i=t,r=e;while(r)n=i%r,i=r,r=n;return t/=i,e/=i,e>0?[t,e]:[-t,-e]}function Dt(t){return Array.from({length:t},(t,e)=>e)}function Gt(t,e){t=t>e/2?e-t:t;let n=1,i=1;for(let r=0;r<t;++r)n*=e-r,i*=r+1;return n/i}class Jt{constructor(){this.stack=[{}]}pick(){const t=this.stack[this.stack.length-1];if("undefined"==typeof t)throw"interval error: empty stack";return t}has(t,e="global"){return"string"==typeof t&&("local"==e?t in this.pick():this.stack.some(e=>t in e))}get(t){return this.stack.reduce((e,n)=>"string"==typeof t&&t in n?n[t]:e,t)}push(...t){this.stack.push(...t)}pop(t=1){const e=this.stack.pop();if("undefined"==typeof e)throw"interval error: empty stack";return 1==t?e:this.pop(t-1)}}class Kt{constructor(){this.env=new Jt,this._cancel=!1}cancel(){this._cancel=!0}reset(){this._cancel=!1}prog(t,e,n){if(this.env.push(...e),this._cancel)throw this._cancel=!1,Nt(...t.get(0));return new Promise(i=>setTimeout(()=>i(n(t).finally(()=>{this.env.pop(e.length)}))))}def(t,e,n){if(this.env.has(e,"local"))throw Vt(...t.get(0),e);this.env.pick()[e]=n}range(t,e,n,i){if(!Qt(e))throw Pt(...t.get(0),e);if(!Qt(n))throw Pt(...t.get(1),n);if("undefined"!=typeof i&&!Qt(i))throw Pt(...t.get(2),i);const r=[];for(let o=0;o<e;o++)r.push(o*(null!==i&&void 0!==i?i:1)+n);return r}adaLovelace(t,e){if(!Qt(e))throw Pt(...t.get(0),e);const n=[];for(let i=1;i<=e;i++){const t=It(i+1);n.push(0==t[0]?"0":`${t[0]}/${t[1]}`)}return n}square(t,e,n){if(!Qt(e))throw Pt(...t.get(0),e);if(!Zt(n))throw At(...t.get(1),n);return new at("square",{size:e,color:n})}concat(t,e){return e.reduce((t,e)=>[...t,...Array.isArray(e)?e:[e]],[])}repeat(t,e,n){if(!Qt(n))throw Pt(...t.get(1),n);const i=Array.isArray(e)?e:[e],r=new Array(n);for(let o=0;o<n;o++)r[o]=i[o%i.length];return r}slice(t,e,n,i){if(!Wt(e))throw Bt(...t.get(0),e);if(!Qt(n))throw Pt(...t.get(1),n);if(void 0!=i&&!Qt(i))throw Pt(...t.get(2),i);return e.slice(n>0?n-1:n,i&&i<0?i+1:i)}length(t,e){if(!Wt(e))throw Bt(...t.get(0),e);return e.length}funct(t,e,n){const i=this.env.pick();return(t,...r)=>Object(I["a"])(this,void 0,void 0,(function*(){if(r.length!=e.length)throw Tt(...t.get(0),r.length,e.length);const o=e.reduce((t,e,n)=>Object.assign(Object.assign({},t),{[e]:r[n]}),{});return yield this.prog(t,[i,o],n)}))}result(t,e,...n){return Object(I["a"])(this,void 0,void 0,(function*(){const i=yield e;if(Wt(i)){const t=n[0];return t>0&&t<=i.length?i[t-1]:n[1]}if(Ut(i))return i(t,...n);throw $t(...t.get(0))}))}known(t,e){if(this.env.has(e))return this.env.get(e);throw Mt(...t.get(0),String(e))}unknown(t,e){if(!this.env.has(e))return e;throw Mt(...t.get(0),String(e))}}function Zt(t){return["green","blue","yellow","red","purple","grey","black","white","orange"].includes(t)}function Qt(t){return"number"==typeof t}function Ut(t){return"function"==typeof t}function Wt(t){return Array.isArray(t)}function Xt(t){const e=a("square",["size","color"]),n=a("range",["start","end","step"]),i=a("adaLovelace",["n"]),r=a("concat",["values"]),o=a("repeat",["data","count"]),c=a("slice",["data","start","end"]),s=a("length",["data"]);function a(e,n){const i=t.funct(new ee,n,i=>Object(I["a"])(this,void 0,void 0,(function*(){const r=t[e],o=[i,...n.map(e=>t.known(i,e))];return r(...o)})));return i.toString=()=>`(${n.join(" ")}) -> ${e}(${n.join(" ")})`,i}function u(t,e){return t.toString=e,t}return{Prog:(e,n)=>t.prog(new ee(...e.children,n),[{}],()=>Object(I["a"])(this,void 0,void 0,(function*(){for(const t of e.children)yield t.eval();return yield n.eval()}))),Def:(e,n,i,r)=>Object(I["a"])(this,void 0,void 0,(function*(){return t.def(new ee(n,r),yield n.eval(),yield r.eval())})),Val:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield t.eval()})),Known:e=>Object(I["a"])(this,void 0,void 0,(function*(){return t.known(new ee(e),yield e.eval())})),Result:(e,n,i,r)=>Object(I["a"])(this,void 0,void 0,(function*(){return yield i.children.reduce((n,r)=>Object(I["a"])(this,void 0,void 0,(function*(){const o=[];for(const t of r.children)o.push(yield t.eval());return yield t.result(new ee(e,...i.children),n,...o)})),yield e.eval())})),Range:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,e,i,r,...o)=>n(t,e,i,r,...o),n.toString)})),AdaLovelace:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,e,...n)=>i(t,e,...n),i.toString)})),Square:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,n,i,...r)=>e(t,n,i,...r),e.toString)})),Concat:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,...e)=>r(t,e),r.toString)})),Repeat:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,e,n,...i)=>o(t,e,n,...i),o.toString)})),Slice:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,e,n,i,...r)=>c(t,e,n,i,...r),c.toString)})),Length:t=>Object(I["a"])(this,void 0,void 0,(function*(){return yield u((t,e,...n)=>s(t,e,...n),s.toString)})),Function:(e,n,i,r,o,c,s)=>Object(I["a"])(this,void 0,void 0,(function*(){const e=[];for(const t of i.children)e.push(yield t.eval());const n=t.funct(new ee(...i.children,c),e,()=>Object(I["a"])(this,void 0,void 0,(function*(){return yield c.eval()})));return n.toString=()=>`(${i.children.map(t=>t.sourceString).join(" ")}) -> ${c.sourceString}`,yield n})),comment:(t,e,n)=>Object(I["a"])(this,void 0,void 0,(function*(){})),number:(t,e)=>Object(I["a"])(this,void 0,void 0,(function*(){return("-"==t.sourceString?-1:1)*parseInt(e.sourceString)})),color:t=>Object(I["a"])(this,void 0,void 0,(function*(){return t.sourceString})),string:(t,e,n)=>Object(I["a"])(this,void 0,void 0,(function*(){return e.sourceString.replace(/""/g,'"')})),identifier:t=>Object(I["a"])(this,void 0,void 0,(function*(){return t.sourceString})),builtin:t=>Object(I["a"])(this,void 0,void 0,(function*(){return t.sourceString}))}}function Yt(t){const e=new Kt,n=()=>e.cancel(),i=t();return"string"==typeof i?{hey:te(i,e),cancel:n}:{hey:t=>i.then(t=>te(t,e)).then(e=>e(t)),cancel:n}}function te(t,e){const n=Ct.a.grammar(t),i=n.createSemantics().addOperation("eval",Xt(e));return t=>{e.reset();const r=n.match(t);if(r.failed())throw qt(t,r);return i(r).eval()}}class ee{constructor(...t){var e;this.source=null===(e=t[0])||void 0===e?void 0:e.source.sourceString,this.pos=t.map(t=>t.source.startIdx)}get(t){return[this.source,this.pos[t]]}}const{hey:ne,cancel:ie}=Yt(()=>Object(b["a"])("/hey.ohm").text());var re=Object(d["a"])({state:{program:void 0,output:void 0,error:void 0},mutations:{setProgram(t,e){t.program=e,t.error=void 0,t.output=void 0},setOutput(t,e){t.output=e},setError(t,e){t.error=e}},actions:{exec({state:t,commit:e}){var n;return Object(I["a"])(this,void 0,void 0,(function*(){try{const i=yield ne(null!==(n=t.program)&&void 0!==n?n:"");e("setOutput",i),e("setError",void 0)}catch(Lt){e("setError",Lt)}}))},clear({commit:t}){return Object(I["a"])(this,void 0,void 0,(function*(){ie(),t("setOutput",void 0),t("setError",void 0)}))}},modules:{}}),oe=n("b80d");n("f9e3"),n("1a26");Object(i["f"])(P).use(re).use(Et).use(oe["a"]).mount("#app")},f560:function(t,e,n){}});
//# sourceMappingURL=app.1a5a1e26.js.map